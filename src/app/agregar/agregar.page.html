<ion-content [fullscreen]="true" class="register-page-content">
  <div class="register-container">
    <div class="register-header">
      <ion-icon name="person-add-outline" class="register-icon"></ion-icon>
      <h1 class="register-title">Crear Cuenta</h1>
      <p class="register-subtitle">칔nete a MovieIonic y descubre tu cat치logo personalizado</p>
    </div>

    <div class="register-form">
      <div class="message-container">
        <div *ngIf="mensaje" class="message-alert" 
             [ngClass]="{'error-message': mensaje.includes('error') || mensaje.includes('Error') || mensaje.includes('obligatorio') || mensaje.includes('existe'), 
                        'success-message': mensaje.includes('exitosamente')}">
          <ion-icon [name]="mensaje.includes('exitosamente') ? 'checkmark-circle-outline' : 'alert-circle-outline'"></ion-icon>
          {{ mensaje }}
        </div>
      </div>

      <div class="input-group">
        <ion-item lines="none" class="custom-input">
          <ion-icon name="person-outline" slot="start" color="primary"></ion-icon>
          <ion-input 
            id="nombreUsuario"
            [(ngModel)]="data.username"
            label="Nombre completo" 
            label-placement="floating" 
            fill="outline" 
            placeholder="Ingresa tu nombre"
            clearInput="true">
          </ion-input>
        </ion-item>
      </div>

      <div class="input-group">
        <ion-item lines="none" class="custom-input">
          <ion-icon name="mail-outline" slot="start" color="primary"></ion-icon>
          <ion-input 
            id="correoUsuario"
            [(ngModel)]="data.email"
            type="email"
            label="Correo electr칩nico" 
            label-placement="floating" 
            fill="outline" 
            placeholder="Ingresa tu correo"
            clearInput="true">
          </ion-input>
        </ion-item>
      </div>

      <div class="input-group">
        <ion-item lines="none" class="custom-input">
          <ion-icon name="lock-closed-outline" slot="start" color="primary"></ion-icon>
          <ion-input 
            id="password"
            type="password"
            [(ngModel)]="data.password"
            label="Contrase침a" 
            label-placement="floating" 
            fill="outline" 
            placeholder="Crea una contrase침a"
            clearInput="true">
          </ion-input>
        </ion-item>
      </div>

      <div class="input-group">
        <ion-item lines="none" class="custom-input">
          <ion-icon name="shield-checkmark-outline" slot="start" color="primary"></ion-icon>
          <ion-input 
            id="confirmPassword"
            type="password"
            [(ngModel)]="data.confirmPassword"
            label="Confirmar contrase침a" 
            label-placement="floating" 
            fill="outline" 
            placeholder="Repite tu contrase침a"
            clearInput="true">
          </ion-input>
        </ion-item>
      </div>

      <div class="input-group">
        <ion-item lines="none" class="custom-input select-input">
          <ion-icon name="heart-outline" slot="start" color="primary"></ion-icon>
          <ion-select
            [(ngModel)]="data.movies"
            label="Pel칤culas favoritas"
            label-placement="floating"
            multiple="true"
            placeholder="Selecciona tus favoritas"
            interface="popover">
            <ion-select-option *ngFor="let pelicula of availableMovies" [value]="pelicula">
              {{ pelicula.title }}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </div>

      <!-- Debug info -->
      <div class="debug-info" style="margin: 1rem 0; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px;">
        <p style="color: white; font-size: 0.8rem; margin: 0;">
          Debug: {{ availableMovies.length || 0 }} pel칤culas disponibles
        </p>
        <p *ngIf="availableMovies.length === 0" style="color: orange; font-size: 0.8rem; margin: 0;">
          丘멆잺 No se encontraron pel칤culas
        </p>
        <ion-button 
          size="small" 
          fill="clear" 
          color="light" 
          (click)="forceReloadMovies()"
          style="margin-top: 0.5rem;">
          游댃 Recargar pel칤culas
        </ion-button>
      </div>

      <div class="register-button-container">
        <ion-button 
          expand="block" 
          shape="round" 
          size="large"
          color="primary"
          (click)="doRegistro()"
          class="register-button">
          <ion-icon name="person-add-outline" slot="start"></ion-icon>
          Crear Cuenta
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>